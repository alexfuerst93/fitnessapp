{% extends 'userprofile/base.html' %}
{% block content %}

<h1>This is your very own profile!</h1>
<h2>Calculate your Max Rep</h2>


<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item"><a class="nav-link active" id="calculate-tab" data-toggle="tab" href="#tab1" role="tab">Calculate</a></li>
    <li class="nav-item"><a class="nav-link" id="add-new-max-tab" data-toggle="tab" href="#tab2" role="tab">Add new Max Exercise</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane fade show active" id="tab1" role="tabpanel">
        <form action="{% url 'profile' %}" method="POST">
            {% csrf_token %}
            <input type="number" step="0.01" placeholder="Weight", name="weight">
            <input type="number" step="0.01" placeholder="Reps", name="reps">
            <button name="calculated_maxrep">Calculate!</button>
        </form>
        <p>{{ ergebnis }}</p>
    </div>
    <div class="tab-pane fade" id="tab2" role="tabpanel">
        <form action="{% url 'profile' %}" method="POST">
            {% csrf_token %}
            {{ form_maxval }}
            <button name="calculate_and_safe">Add new Max Val Exercise!</button>
        </form>
    </div>
  </div>


<h2>View your current Max-reps</h2>

{% if not maxvals %}
<p>You currently don't have any max values set. Use the above calculator to add new exercises!</p>
{% endif %}

{% for maxval in maxvals %}
<p>{{ maxval.exercise }} | Max Value: {{ maxval.max_value }} | Record set at: {{ maxval.timestamp|date:"d.m.Y H:i" }}</p>
{% endfor %}

<h2>Manage all your exercises (add/delete/modify)</h2>
<form action="{% url 'profile' %}" method="POST">
    {% csrf_token %}
    {{ form }}
    <input type="submit" name="added_exercise">
</form>

{% if not exercises %}
<p>Create some exercises to build your workout!</p>
{% endif %}

{% for musclegroup in musclegroups %}
    <h3>{{ musclegroup }}</h3>
    {% for exercise in exercises %}
        {% if exercise.muscle == musclegroup %}
        <p>{{ exercise.title }}</p>
        <p>High: {{ exercise.high_range }} | Mid: {{ exercise.mid_range }} | Low: {{ exercise.low_range }}</p>
        <form action="{% url 'profile' %}" method="POST">
            {% csrf_token %}
            {{ form.title }} {{ form.muscle }}
            <input type="hidden" name="{{ exercise.id }}">
            <button name="modified_exercise">Modify</button>
            <button name="deleted_exercise">Delete</button>
        </form>
        {% endif %}
    {% endfor %}
{% endfor %}


<h2>Here's a link to the workout section</h2>
<p>Contains all former workout plans as well as the current one</p>

{% endblock %}
